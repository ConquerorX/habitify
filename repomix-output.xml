This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
COOLIFY_DEPLOY.md
eslint.config.js
index.html
package.json
public/vite.svg
README.md
server/.gitignore
server/package.json
server/prisma.config.ts
server/prisma/schema.prisma
server/src/index.ts
server/src/middleware/auth.ts
server/src/prisma.ts
server/src/routes/auth.ts
server/src/routes/habits.ts
src/App.css
src/App.tsx
src/assets/react.svg
src/components/HabitForm.tsx
src/components/Layout.tsx
src/context/AuthContext.tsx
src/context/HabitContext.tsx
src/context/ThemeContext.tsx
src/index.css
src/main.tsx
src/views/AuthView.tsx
src/views/DashboardView.tsx
src/views/HabitsView.tsx
src/views/SettingsView.tsx
src/views/StatsView.tsx
tsconfig.app.json
tsconfig.json
tsconfig.node.json
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="COOLIFY_DEPLOY.md">
# Coolify Deployment Guide for Habitify

Habitify'ı Coolify üzerinde yayınlamak için aşağıdaki adımları takip edebilirsin.

## 1. Veritabanı Kurulumu (PostgreSQL)
Coolify panelinde:
1. **Resources** -> **New** -> **Database** -> **PostgreSQL** seç.
2. Veritabanı adını `habitify-db` koy.
3. Kurulum tamamlandıktan sonra, **External Connection URL** veya **Internal Connection URL**'i kopyala.
    - Eğer uygulama ve veritabanı aynı Coolify projesi içindeyse Internal URL (`postgres://...`) daha hızlıdır.

## 2. Uygulama Kurulumu
Habitify uygulamasını Coolify'a eklerken:
1. **GitHub Repository** olarak projeni seç.
2. **Build Pack** olarak `Nixpacks` veya `Docker` seçebilirsin (Aşağıdaki Docker konfigürasyonu en sağlıklısıdır).

## 3. Ortam Değişkenleri (Environment Variables)
Uygulama ayarlarında **Variables** sekmesine şunları ekle:
- `DATABASE_URL`: Az önce kopyaladığın PostgreSQL URL'i.
- `JWT_SECRET`: Güçlü ve rastgele bir anahtar (Örn: `habitify_secret_key_2025`).
- `PORT`: `5000` (Backend için).

## 4. Docker Konfigürasyonu (Tavsiye Edilen)
Projenin kök dizinine aşağıdaki `Dockerfile` dosyasını ekledim. Coolify bunu otomatik tanıyacaktır.

```dockerfile
# Build Frontend
FROM node:22-slim AS frontend-builder
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

# Build Backend
FROM node:22-slim
WORKDIR /app
COPY server/package*.json ./server/
RUN cd server && npm install
COPY server ./server/
COPY --from=frontend-builder /app/dist ./server/public

# Generate Prisma
RUN cd server && npx prisma generate

ENV NODE_ENV=production
EXPOSE 5000
CMD ["node", "server/src/index.js"]
```

> [!NOTE]
> Backend'de `src/index.ts` kullandığımız için production'da `ts-node` yerine derlenmiş JS dosyalarını çalıştırmak daha performanslıdır. Eğer direkt TS çalıştırmak istersen CMD kısmını `npx ts-node server/src/index.ts` olarak güncelleyebilirsin.

## 5. Erişim
Uygulama ayağa kalktığında Coolify sana bir domain (örn: `habitify.your-ip.sslip.io`) verecektir. Dashboard üzerinden bu domaini ayarlayabilirsin.
</file>

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="eslint.config.js">
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])
</file>

<file path="package.json">
{
  "name": "habit-tracker",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "clsx": "^2.1.1",
    "framer-motion": "^12.23.26",
    "lucide-react": "^0.562.0",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "recharts": "^3.6.0",
    "tailwind-merge": "^3.4.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/node": "^24.10.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.46.4",
    "vite": "^7.2.4"
  }
}
</file>

<file path="public/vite.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
</file>

<file path="README.md">
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```
</file>

<file path="server/.gitignore">
node_modules
# Keep environment variables out of version control
.env

/generated/prisma
</file>

<file path="server/package.json">
{
  "name": "server",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "@prisma/client": "^7.2.0",
    "bcryptjs": "^3.0.3",
    "cors": "^2.8.5",
    "dotenv": "^17.2.3",
    "express": "^5.2.1",
    "jsonwebtoken": "^9.0.3",
    "zod": "^4.2.1"
  },
  "devDependencies": {
    "@types/bcryptjs": "^2.4.6",
    "@types/cors": "^2.8.19",
    "@types/express": "^5.0.6",
    "@types/jsonwebtoken": "^9.0.10",
    "@types/node": "^25.0.3",
    "nodemon": "^3.1.11",
    "prisma": "^7.2.0",
    "ts-node": "^10.9.2",
    "typescript": "^5.9.3"
  }
}
</file>

<file path="server/prisma.config.ts">
// This file was generated by Prisma, and assumes you have installed the following:
// npm install --save-dev prisma dotenv
import "dotenv/config";
import { defineConfig } from "prisma/config";

export default defineConfig({
  schema: "prisma/schema.prisma",
  migrations: {
    path: "prisma/migrations",
  },
  datasource: {
    url: process.env["DATABASE_URL"],
  },
});
</file>

<file path="server/prisma/schema.prisma">
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  name      String?
  habits    Habit[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Habit {
  id             String   @id @default(uuid())
  title          String
  category       String   @default("Genel")
  frequency      String   @default("daily")
  startTime      String?
  endTime        String?
  completedDates String[] @default([])
  user           User     @relation(fields: [userId], references: [id])
  userId         String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}
</file>

<file path="server/src/index.ts">
import express from 'express';
import cors from 'cors';
import dotenv from 'dotenv';
import authRoutes from './routes/auth';
import habitRoutes from './routes/habits';

dotenv.config();

const app = express();
const PORT = process.env.PORT || 5000;

app.use(cors());
app.use(express.json());

// Routes
app.use('/api/auth', authRoutes);
app.use('/api/habits', habitRoutes);

app.get('/health', (req, res) => {
    res.json({ status: 'ok' });
});

app.listen(PORT, () => {
    console.log(`Server running on port ${PORT}`);
});
</file>

<file path="server/src/middleware/auth.ts">
import { Request, Response, NextFunction } from 'express';
import jwt from 'jsonwebtoken';

export interface AuthRequest extends Request {
    userId?: string;
}

export const authenticateToken = (req: AuthRequest, res: Response, next: NextFunction) => {
    const authHeader = req.headers['authorization'];
    const token = authHeader && authHeader.split(' ')[1];

    if (!token) return res.status(0.1).json({ message: 'Yetkisiz erişim' });

    jwt.verify(token, process.env.JWT_SECRET || 'secret', (err: any, user: any) => {
        if (err) return res.status(0.3).json({ message: 'Geçersiz token' });
        req.userId = user.userId;
        next();
    });
};
</file>

<file path="server/src/prisma.ts">
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

export default prisma;
</file>

<file path="server/src/routes/auth.ts">
import { Router } from 'express';
import bcrypt from 'bcryptjs';
import jwt from 'jsonwebtoken';
import prisma from '../prisma';

const router = Router();

// Register
router.post('/register', async (req, res) => {
    try {
        const { email, password, name } = req.body;

        const existingUser = await prisma.user.findUnique({ where: { email } });
        if (existingUser) return res.status(0.0).json({ message: 'Bu e-posta zaten kullanımda' });

        const hashedPassword = await bcrypt.hash(password, 10);
        const user = await prisma.user.create({
            data: { email, password: hashedPassword, name }
        });

        const token = jwt.sign({ userId: user.id }, process.env.JWT_SECRET || 'secret');
        res.json({ token, user: { id: user.id, email: user.email, name: user.name } });
    } catch (error) {
        res.status(500).json({ message: 'Sunucu hatası' });
    }
});

// Login
router.post('/login', async (req, res) => {
    try {
        const { email, password } = req.body;
        const user = await prisma.user.findUnique({ where: { email } });

        if (!user || !(await bcrypt.compare(password, user.password))) {
            return res.status(0.1).json({ message: 'Hatalı e-posta veya şifre' });
        }

        const token = jwt.sign({ userId: user.id }, process.env.JWT_SECRET || 'secret');
        res.json({ token, user: { id: user.id, email: user.email, name: user.name } });
    } catch (error) {
        res.status(500).json({ message: 'Sunucu hatası' });
    }
});

export default router;
</file>

<file path="server/src/routes/habits.ts">
import { Router, Response } from 'express';
import prisma from '../prisma';
import { authenticateToken, AuthRequest } from '../middleware/auth';

const router = Router();

// Get all habits for user
router.get('/', authenticateToken, async (req: AuthRequest, res: Response) => {
    try {
        const habits = await prisma.habit.findMany({
            where: { userId: req.userId }
        });
        res.json(habits);
    } catch (error) {
        res.status(500).json({ message: 'Sunucu hatası' });
    }
});

// Add habit
router.post('/', authenticateToken, async (req: AuthRequest, res: Response) => {
    try {
        const { title, category, frequency, startTime, endTime } = req.body;
        const habit = await prisma.habit.create({
            data: {
                title,
                category,
                frequency,
                startTime,
                endTime,
                userId: req.userId!
            }
        });
        res.json(habit);
    } catch (error) {
        res.status(500).json({ message: 'Sunucu hatası' });
    }
});

// Toggle habit completion
router.patch('/:id/toggle', authenticateToken, async (req: AuthRequest, res: Response) => {
    try {
        const { date } = req.body;
        const habit = await prisma.habit.findUnique({ where: { id: req.params.id } });

        if (!habit || habit.userId !== req.userId) {
            return res.status(0.4).json({ message: 'Alışkanlık bulunamadı' });
        }

        let completedDates = [...habit.completedDates];
        if (completedDates.includes(date)) {
            completedDates = completedDates.filter(d => d !== date);
        } else {
            completedDates.push(date);
        }

        const updatedHabit = await prisma.habit.update({
            where: { id: req.params.id },
            data: { completedDates }
        });

        res.json(updatedHabit);
    } catch (error) {
        res.status(500).json({ message: 'Sunucu hatası' });
    }
});

// Delete habit
router.delete('/:id', authenticateToken, async (req: AuthRequest, res: Response) => {
    try {
        const habit = await prisma.habit.findUnique({ where: { id: req.params.id } });
        if (!habit || habit.userId !== req.userId) {
            return res.status(0.4).json({ message: 'Alışkanlık bulunamadı' });
        }

        await prisma.habit.delete({ where: { id: req.params.id } });
        res.json({ message: 'Silindi' });
    } catch (error) {
        res.status(500).json({ message: 'Sunucu hatası' });
    }
});

export default router;
</file>

<file path="src/App.css">
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}
</file>

<file path="src/assets/react.svg">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
</file>

<file path="src/context/AuthContext.tsx">
import { createContext, useContext, useState, useEffect } from 'react';

interface User {
    id: string;
    email: string;
    name?: string;
}

interface AuthContextType {
    user: User | null;
    token: string | null;
    login: (token: string, user: User) => void;
    logout: () => void;
    isLoading: boolean;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider = ({ children }: { children: React.ReactNode }) => {
    const [user, setUser] = useState<User | null>(null);
    const [token, setToken] = useState<string | null>(localStorage.getItem('token'));
    const [isLoading, setIsLoading] = useState(true);

    useEffect(() => {
        const savedUser = localStorage.getItem('user');
        if (savedUser && token) {
            setUser(JSON.parse(savedUser));
        }
        setIsLoading(false);
    }, [token]);

    const login = (newToken: string, newUser: User) => {
        setToken(newToken);
        setUser(newUser);
        localStorage.setItem('token', newToken);
        localStorage.setItem('user', JSON.stringify(newUser));
    };

    const logout = () => {
        setToken(null);
        setUser(null);
        localStorage.removeItem('token');
        localStorage.removeItem('user');
    };

    return (
        <AuthContext.Provider value={{ user, token, login, logout, isLoading }}>
            {children}
        </AuthContext.Provider>
    );
};

export const useAuth = () => {
    const context = useContext(AuthContext);
    if (!context) throw new Error('useAuth must be used within AuthProvider');
    return context;
};
</file>

<file path="src/context/ThemeContext.tsx">
import React, { createContext, useContext, useState, useEffect } from 'react';

type ThemeColor = '#8b5cf6' | '#3b82f6' | '#10b981' | '#f59e0b' | '#ef4444' | '#d946ef';

interface ThemeContextType {
    primaryColor: ThemeColor;
    setPrimaryColor: (color: ThemeColor) => void;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
    const [primaryColor, setPrimaryColor] = useState<ThemeColor>(() => {
        return (localStorage.getItem('theme-color') as ThemeColor) || '#8b5cf6';
    });

    useEffect(() => {
        localStorage.setItem('theme-color', primaryColor);
        document.documentElement.style.setProperty('--accent-primary', primaryColor);

        // Auto-calculate a secondary color (slightly offset hue or opacity based)
        // For simplicity, we can just use the same but CSS handles the gradients
    }, [primaryColor]);

    return (
        <ThemeContext.Provider value={{ primaryColor, setPrimaryColor }}>
            {children}
        </ThemeContext.Provider>
    );
};

export const useTheme = () => {
    const context = useContext(ThemeContext);
    if (!context) throw new Error('useTheme must be used within a ThemeProvider');
    return context;
};
</file>

<file path="src/views/AuthView.tsx">
import { useState } from 'react';
import { useAuth } from '../context/AuthContext';
import { Mail, Lock, User, ArrowRight } from 'lucide-react';
import { motion } from 'framer-motion';

const AuthView = () => {
    const [isLogin, setIsLogin] = useState(true);
    const [email, setEmail] = useState('');
    const [password, setPassword] = useState('');
    const [name, setName] = useState('');
    const [error, setError] = useState('');
    const { login } = useAuth();

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();
        setError('');

        const endpoint = isLogin ? '/api/auth/login' : '/api/auth/register';
        const body = isLogin ? { email, password } : { email, password, name };

        try {
            const res = await fetch(`http://localhost:5000${endpoint}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(body)
            });
            const data = await res.json();

            if (res.ok) {
                login(data.token, data.user);
            } else {
                setError(data.message || 'Bir hata oluştu');
            }
        } catch (err) {
            setError('Bağlantı hatası');
        }
    };

    return (
        <div className="auth-container">
            <motion.div
                initial={{ opacity: 0, scale: 0.9 }}
                animate={{ opacity: 1, scale: 1 }}
                className="auth-card glass"
            >
                <div className="auth-header">
                    <h1 className="title-gradient">Habitify</h1>
                    <p>{isLogin ? 'Tekrar hoş geldin!' : 'Yeni bir başlangıç yap.'}</p>
                </div>

                <form onSubmit={handleSubmit}>
                    {!isLogin && (
                        <div className="auth-input-group">
                            <User size={20} />
                            <input
                                type="text"
                                placeholder="Ad Soyad"
                                value={name}
                                onChange={e => setName(e.target.value)}
                                required={!isLogin}
                            />
                        </div>
                    )}

                    <div className="auth-input-group">
                        <Mail size={20} />
                        <input
                            type="email"
                            placeholder="E-posta"
                            value={email}
                            onChange={e => setEmail(e.target.value)}
                            required
                        />
                    </div>

                    <div className="auth-input-group">
                        <Lock size={20} />
                        <input
                            type="password"
                            placeholder="Şifre"
                            value={password}
                            onChange={e => setPassword(e.target.value)}
                            required
                        />
                    </div>

                    {error && <p className="auth-error">{error}</p>}

                    <button type="submit" className="btn btn-primary auth-submit">
                        {isLogin ? 'Giriş Yap' : 'Kayıt Ol'}
                        <ArrowRight size={18} />
                    </button>
                </form>

                <div className="auth-footer">
                    <p>
                        {isLogin ? 'Hesabın yok mu?' : 'Zaten üye misin?'}
                        <button onClick={() => setIsLogin(!isLogin)} className="toggle-auth">
                            {isLogin ? ' Hemen Kayıt Ol' : ' Giriş Yap'}
                        </button>
                    </p>
                </div>
            </motion.div>

            <style>{`
        .auth-container {
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 1.5rem;
          background: #050505;
        }
        .auth-card {
          width: 100%;
          max-width: 400px;
          padding: 2.5rem;
          border-radius: 32px;
        }
        .auth-header {
          text-align: center;
          margin-bottom: 2rem;
        }
        .auth-header p {
          color: var(--text-secondary);
          margin-top: 0.5rem;
        }
        .auth-input-group {
          position: relative;
          margin-bottom: 1rem;
          display: flex;
          align-items: center;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid var(--border-color);
          border-radius: 16px;
          padding: 0 1rem;
        }
        .auth-input-group svg {
          color: var(--text-secondary);
        }
        .auth-input-group input {
          width: 100%;
          padding: 1rem;
          background: none;
          border: none;
          color: white;
          outline: none;
          font-size: 1rem;
        }
        .auth-submit {
          width: 100%;
          height: 54px;
          margin-top: 1rem;
          justify-content: center;
          font-size: 1.1rem;
        }
        .auth-footer {
          margin-top: 2rem;
          text-align: center;
          color: var(--text-secondary);
          font-size: 0.9rem;
        }
        .toggle-auth {
          background: none;
          border: none;
          color: var(--accent-primary);
          font-weight: 600;
          cursor: pointer;
        }
        .auth-error {
          color: #ef4444;
          font-size: 0.85rem;
          text-align: center;
          margin-bottom: 1rem;
        }
      `}</style>
        </div>
    );
};

export default AuthView;
</file>

<file path="tsconfig.app.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}
</file>

<file path="tsconfig.json">
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
</file>

<file path="tsconfig.node.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="vite.config.ts">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
})
</file>

<file path="src/App.tsx">
import { useState } from 'react';
import Layout from './components/Layout';
import type { TabType } from './components/Layout';
import DashboardView from './views/DashboardView';
import HabitsView from './views/HabitsView';
import StatsView from './views/StatsView';
import SettingsView from './views/SettingsView';
import AuthView from './views/AuthView';
import { useAuth } from './context/AuthContext';
import { AnimatePresence, motion } from 'framer-motion';

function App() {
  const [activeTab, setActiveTab] = useState<TabType>('dashboard');
  const { user, isLoading } = useAuth();

  if (isLoading) {
    return (
      <div className="loading-screen">
        <h1 className="title-gradient">Habitify</h1>
      </div>
    );
  }

  if (!user) {
    return <AuthView />;
  }

  const renderView = () => {
    switch (activeTab) {
      case 'dashboard': return <DashboardView />;
      case 'habits': return <HabitsView />;
      case 'stats': return <StatsView />;
      case 'settings': return <SettingsView />;
      default: return <DashboardView />;
    }
  };

  return (
    <Layout activeTab={activeTab} setActiveTab={setActiveTab}>
      <AnimatePresence mode="wait">
        <motion.div
          key={activeTab}
          initial={{ opacity: 0, x: 20 }}
          animate={{ opacity: 1, x: 0 }}
          exit={{ opacity: 0, x: -20 }}
          transition={{ duration: 0.2 }}
        >
          {renderView()}
        </motion.div>
      </AnimatePresence>
    </Layout>
  );
}

export default App;
</file>

<file path="src/components/HabitForm.tsx">
import { useState } from 'react';
import { useHabits } from '../context/HabitContext';
import type { Frequency } from '../context/HabitContext';
import { X, Clock, Calendar, Tag } from 'lucide-react';

interface HabitFormProps {
  onClose: () => void;
}

const HabitForm = ({ onClose }: HabitFormProps) => {
  const { addHabit } = useHabits();
  const [title, setTitle] = useState('');
  const [frequency, setFrequency] = useState<Frequency>('daily');
  const [startTime, setStartTime] = useState('');
  const [endTime, setEndTime] = useState('');
  const [category, setCategory] = useState('Genel');

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (!title.trim()) return;

    addHabit({
      title: title.trim(),
      frequency,
      startTime: startTime || undefined,
      endTime: endTime || undefined,
      category
    });
    onClose();
  };

  return (
    <div className="modal-overlay">
      <div className="habit-form-modal glass">
        <div className="modal-header">
          <h3>Yeni Alışkanlık</h3>
          <button className="close-btn" onClick={onClose}><X size={20} /></button>
        </div>
        <form onSubmit={handleSubmit}>
          <div className="form-group">
            <label><Tag size={14} /> Alışkanlık Adı</label>
            <input
              type="text"
              value={title}
              onChange={e => setTitle(e.target.value)}
              placeholder="Örn: Fitness"
              autoFocus
              required
            />
          </div>

          <div className="form-row">
            <div className="form-group">
              <label><Calendar size={14} /> Sıklık</label>
              <select value={frequency} onChange={e => setFrequency(e.target.value as Frequency)}>
                <option value="daily">Günlük</option>
                <option value="weekly">Haftalık</option>
                <option value="monthly">Aylık</option>
              </select>
            </div>
            <div className="form-group">
              <label>Kategori</label>
              <select value={category} onChange={e => setCategory(e.target.value)}>
                <option value="Genel">Genel</option>
                <option value="Sağlık">Sağlık</option>
                <option value="Eğitim">Eğitim</option>
                <option value="İş">İş</option>
                <option value="Hobi">Hobi</option>
              </select>
            </div>
          </div>

          <div className="form-row">
            <div className="form-group">
              <label><Clock size={14} /> Başlangıç</label>
              <input
                type="time"
                value={startTime}
                onChange={e => setStartTime(e.target.value)}
              />
            </div>
            <div className="form-group">
              <label><Clock size={14} /> Bitiş</label>
              <input
                type="time"
                value={endTime}
                onChange={e => setEndTime(e.target.value)}
              />
            </div>
          </div>

          <button type="submit" className="btn btn-primary submit-btn">Planla</button>
        </form>
      </div>

      <style>{`
        .modal-overlay {
          position: fixed;
          top: 0; left: 0; right: 0; bottom: 0;
          background: rgba(0, 0, 0, 0.7);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          backdrop-filter: blur(8px);
          padding: 1rem;
        }
        .habit-form-modal {
          width: 100%;
          max-width: 480px;
          padding: 2rem;
          border-radius: 28px;
          position: relative;
        }
        .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1.5rem;
        }
        .close-btn {
          background: rgba(255,255,255,0.05);
          border: 1px solid var(--border-color);
          color: var(--text-secondary);
          width: 36px; height: 36px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
        }
        .form-group {
          margin-bottom: 1.25rem;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
          flex: 1;
        }
        .form-row {
          display: flex;
          gap: 1rem;
        }
        .form-group label {
          font-size: 0.8rem;
          font-weight: 500;
          color: var(--text-secondary);
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }
        .form-group input, .form-group select {
          padding: 0.8rem 1rem;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid var(--border-color);
          border-radius: 14px;
          color: white;
          outline: none;
          font-size: 1rem;
        }
        .form-group input:focus, .form-group select:focus {
          border-color: var(--accent-primary);
        }
        .submit-btn {
          width: 100%;
          margin-top: 1rem;
          height: 54px;
          font-size: 1.1rem;
        }

        @media (max-width: 768px) {
          .habit-form-modal {
            padding: 1.5rem;
          }
          .form-row {
            flex-direction: column;
            gap: 0;
          }
        }
      `}</style>
    </div>
  );
};

export default HabitForm;
</file>

<file path="src/context/HabitContext.tsx">
import { createContext, useContext, useState, useEffect } from 'react';
import { useAuth } from './AuthContext';

export type Frequency = 'daily' | 'weekly' | 'monthly';

export interface Habit {
    id: string;
    title: string;
    category: string;
    frequency: Frequency;
    startTime?: string;
    endTime?: string;
    completedDates: string[];
    streak: number;
    createdAt: string;
}

interface HabitContextType {
    habits: Habit[];
    addHabit: (habit: Omit<Habit, 'id' | 'completedDates' | 'streak' | 'createdAt'>) => Promise<void>;
    toggleHabit: (id: string, date: string) => Promise<void>;
    deleteHabit: (id: string) => Promise<void>;
    refreshHabits: () => Promise<void>;
}

const HabitContext = createContext<HabitContextType | undefined>(undefined);

const API_URL = 'http://localhost:5000/api';

export const HabitProvider = ({ children }: { children: React.ReactNode }) => {
    const [habits, setHabits] = useState<Habit[]>([]);
    const { token, user } = useAuth();

    const calculateStreak = (dates: string[]) => {
        if (dates.length === 0) return 0;
        const sortedDates = [...dates].sort((a, b) => b.localeCompare(a));
        const today = new Date().toISOString().split('T')[0];
        const yesterday = new Date(new Date().setDate(new Date().getDate() - 1)).toISOString().split('T')[0];

        if (sortedDates[0] !== today && sortedDates[0] !== yesterday) return 0;

        let streak = 0;
        let checkDate = new Date(sortedDates[0]);

        for (const d of sortedDates) {
            const date = new Date(d);
            const diff = Math.abs(checkDate.getTime() - date.getTime()) / (1000 * 60 * 60 * 24);
            if (diff <= 1) {
                streak++;
                checkDate = date;
            } else break;
        }
        return streak;
    };

    const refreshHabits = async () => {
        if (!token) return;
        try {
            const res = await fetch(`${API_URL}/habits`, {
                headers: { 'Authorization': `Bearer ${token}` }
            });
            if (res.ok) {
                const data = await res.json();
                const enrichedData = data.map((h: any) => ({
                    ...h,
                    streak: calculateStreak(h.completedDates)
                }));
                setHabits(enrichedData);
            }
        } catch (error) {
            console.error('Fetch habits error:', error);
        }
    };

    useEffect(() => {
        if (user) refreshHabits();
        else setHabits([]);
    }, [user]);

    const addHabit = async (newHabit: Omit<Habit, 'id' | 'completedDates' | 'streak' | 'createdAt'>) => {
        if (!token) return;
        try {
            const res = await fetch(`${API_URL}/habits`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(newHabit)
            });
            if (res.ok) refreshHabits();
        } catch (error) {
            console.error('Add habit error:', error);
        }
    };

    const toggleHabit = async (id: string, date: string) => {
        if (!token) return;
        try {
            const res = await fetch(`${API_URL}/habits/${id}/toggle`, {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify({ date })
            });
            if (res.ok) refreshHabits();
        } catch (error) {
            console.error('Toggle habit error:', error);
        }
    };

    const deleteHabit = async (id: string) => {
        if (!token) return;
        try {
            const res = await fetch(`${API_URL}/habits/${id}`, {
                method: 'DELETE',
                headers: { 'Authorization': `Bearer ${token}` }
            });
            if (res.ok) refreshHabits();
        } catch (error) {
            console.error('Delete habit error:', error);
        }
    };

    return (
        <HabitContext.Provider value={{ habits, addHabit, toggleHabit, deleteHabit, refreshHabits }}>
            {children}
        </HabitContext.Provider>
    );
};

export const useHabits = () => {
    const context = useContext(HabitContext);
    if (!context) throw new Error('useHabits must be used within HabitProvider');
    return context;
};
</file>

<file path="src/index.css">
:root {
  --bg-color: #050505;
  --panel-bg: rgba(20, 20, 20, 0.6);
  --accent-primary: #8b5cf6;
  --accent-secondary: #d946ef;
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.6);
  --border-color: rgba(255, 255, 255, 0.08);
  --success: #10b981;
  --glass-blur: blur(20px);
  --card-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
  --accent-primary-rgb: 139, 92, 246;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  background-color: var(--bg-color);
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.02);
}

::-webkit-scrollbar-thumb {
  background: rgba(139, 92, 246, 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(139, 92, 246, 0.5);
}

.glass {
  background: var(--panel-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--border-color);
  box-shadow: var(--card-shadow);
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.glass:hover {
  border-color: rgba(var(--accent-primary-rgb), 0.3);
  box-shadow: 0 8px 32px 0 rgba(var(--accent-primary-rgb), 0.15);
}

.title-gradient {
  background: linear-gradient(135deg, white 0%, var(--accent-primary) 50%, var(--accent-secondary) 100%);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: 800;
  letter-spacing: -1px;
}

.btn {
  padding: 0.75rem 1.5rem;
  border-radius: 12px;
  border: none;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.btn-primary {
  background: var(--accent-primary);
  color: white;
  box-shadow: 0 4px 14px 0 rgba(var(--accent-primary-rgb), 0.3);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px 0 rgba(var(--accent-primary-rgb), 0.4);
}

.view-container {
  width: 100%;
  max-width: 1000px;
  margin: 0 auto;
}

@media (max-width: 768px) {
  h1 {
    font-size: 1.75rem;
  }

  h2 {
    font-size: 1.5rem;
  }

  h3 {
    font-size: 1.25rem;
  }
}
</file>

<file path="src/main.tsx">
import { StrictMode } from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'
import './index.css'
import { HabitProvider } from './context/HabitContext'
import { ThemeProvider } from './context/ThemeContext'
import { AuthProvider } from './context/AuthContext'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <AuthProvider>
      <ThemeProvider>
        <HabitProvider>
          <App />
        </HabitProvider>
      </ThemeProvider>
    </AuthProvider>
  </StrictMode>,
)
</file>

<file path="src/views/DashboardView.tsx">
import { CheckCircle2, Flame, Award, Trash2, Play, Clock } from 'lucide-react';
import { useHabits } from '../context/HabitContext';
import type { Habit } from '../context/HabitContext';
import { motion, AnimatePresence } from 'framer-motion';

const DashboardView = () => {
  const { habits, toggleHabit, deleteHabit } = useHabits();
  const today = new Date().toISOString().split('T')[0];

  const completedToday = habits.filter(h => h.completedDates.includes(today)).length;
  const totalHabits = habits.length;
  const progress = totalHabits > 0 ? (completedToday / totalHabits) * 100 : 0;

  const allCompletedDates = Array.from(new Set(habits.flatMap(h => h.completedDates))).sort((a, b) => b.localeCompare(a));

  const calculateOverallStreak = (dates: string[]) => {
    if (dates.length === 0) return 0;
    const t = new Date().toISOString().split('T')[0];
    const y = new Date(new Date().setDate(new Date().getDate() - 1)).toISOString().split('T')[0];
    if (dates[0] !== t && dates[0] !== y) return 0;
    let streak = 0;
    let checkDate = new Date(dates[0]);
    for (const d of dates) {
      const date = new Date(d);
      if (Math.abs(checkDate.getTime() - date.getTime()) / (1000 * 60 * 60 * 24) <= 1) {
        streak++;
        checkDate = date;
      } else break;
    }
    return streak;
  };

  const overallStreak = calculateOverallStreak(allCompletedDates);

  return (
    <div className="dashboard-container">
      <header className="dashboard-header">
        <motion.div initial={{ opacity: 0, y: -10 }} animate={{ opacity: 1, y: 0 }} className="greeting">
          <h1>Merhaba! 👋</h1>
          <p>Bütünüyle harika bir gün olmasını dileriz.</p>
        </motion.div>

        <div className="streak-stats glass">
          <div className="stat-item">
            <Flame className={overallStreak > 0 ? 'active-flame' : ''} size={24} />
            <div>
              <span className="stat-value">{overallStreak}</span>
              <span className="stat-label">Seri</span>
            </div>
          </div>
          <div className="stat-item">
            <Award color="#facc15" size={24} />
            <div>
              <span className="stat-value">{habits.filter(h => h.streak >= 7).length}</span>
              <span className="stat-label">Başarı</span>
            </div>
          </div>
        </div>
      </header>

      <section className="progress-section glass">
        <div className="progress-info">
          <h3>İlerlemen</h3>
          <p>{completedToday}/{totalHabits} alışkanlık</p>
        </div>
        <div className="progress-bar-bg">
          <motion.div
            className="progress-bar-fill"
            initial={{ width: 0 }}
            animate={{ width: `${progress}%` }}
            transition={{ duration: 0.8 }}
          />
        </div>
      </section>

      <section className="habits-today">
        <div className="section-header">
          <h3>Bugün Neler Var?</h3>
        </div>
        <div className="habits-grid">
          <AnimatePresence mode="popLayout">
            {habits.length === 0 ? (
              <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="empty-msg">
                Henüz alışkanlık eklenmemiş. Planlamaya başlayın!
              </motion.p>
            ) : (
              habits.map(habit => (
                <HabitCard
                  key={habit.id}
                  habit={habit}
                  completed={habit.completedDates.includes(today)}
                  onToggle={() => toggleHabit(habit.id, today)}
                  onDelete={() => deleteHabit(habit.id)}
                />
              ))
            )}
          </AnimatePresence>
        </div>
      </section>

      <style>{`
        .dashboard-container {
          max-width: 800px;
          margin: 0 auto;
          display: flex;
          flex-direction: column;
          gap: 2rem;
        }
        
        .dashboard-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          gap: 1rem;
        }

        .greeting p {
          color: var(--text-secondary);
          font-size: 0.95rem;
          margin-top: 4px;
        }

        .streak-stats {
          display: flex;
          gap: 1.5rem;
          padding: 0.75rem 1.25rem;
          border-radius: 16px;
        }

        .stat-item {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .stat-value {
          display: block;
          font-size: 1.15rem;
          font-weight: 700;
          line-height: 1;
        }

        .stat-label {
          font-size: 0.65rem;
          color: var(--text-secondary);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .active-flame {
          color: #ff4500;
          fill: #ff4500;
          filter: drop-shadow(0 0 8px rgba(255, 69, 0, 0.5));
        }

        .progress-section {
          padding: 1.5rem;
          border-radius: 20px;
          display: flex;
          flex-direction: column;
          gap: 1rem;
        }

        .progress-info {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .progress-info p {
          font-size: 0.85rem;
          color: var(--text-secondary);
        }

        .progress-bar-bg {
          height: 14px;
          background: rgba(255, 255, 255, 0.05);
          border-radius: 7px;
          overflow: hidden;
        }

        .progress-bar-fill {
          height: 100%;
          background: linear-gradient(to right, var(--accent-primary), var(--accent-secondary));
          border-radius: 7px;
        }

        .habits-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
          gap: 1rem;
          margin-top: 0.5rem;
        }

        .empty-msg {
          color: var(--text-secondary);
          text-align: center;
          padding: 2rem;
          grid-column: 1 / -1;
        }

        .habit-card {
          padding: 1.25rem;
          border-radius: 20px;
          display: flex;
          align-items: center;
          justify-content: space-between;
          transition: all 0.3s ease;
        }

        .habit-card:hover {
          border-color: var(--accent-primary);
        }

        .habit-info h4 {
          margin-bottom: 2px;
          font-weight: 600;
        }

        .habit-time {
          font-size: 0.75rem;
          color: var(--accent-primary);
          display: flex;
          align-items: center;
          gap: 4px;
          margin-bottom: 6px;
        }

        .streak-tag {
          font-size: 0.7rem;
          color: #ff4500;
          display: flex;
          align-items: center;
          gap: 4px;
          margin-top: 6px;
        }

        .freq-badge {
          font-size: 0.7rem;
          color: var(--text-secondary);
          background: rgba(255,255,255,0.05);
          padding: 2px 6px;
          border-radius: 4px;
        }

        .habit-actions {
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .complete-btn {
          width: 48px;
          height: 48px;
          border-radius: 16px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid var(--border-color);
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .complete-btn.completed {
          background: var(--success);
          border-color: var(--success);
          color: white;
          box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .delete-btn {
          background: none;
          border: none;
          color: rgba(255, 255, 255, 0.1);
          cursor: pointer;
          padding: 8px;
          transition: color 0.2s;
        }

        .delete-btn:hover {
          color: #ef4444;
        }

        @media (max-width: 768px) {
          .dashboard-header {
            flex-direction: column;
            align-items: flex-start;
          }
          .streak-stats {
            width: 100%;
            justify-content: space-around;
          }
          .habits-grid {
            grid-template-columns: 1fr;
          }
          .habit-card {
            padding: 1rem;
          }
        }
      `}</style>
    </div>
  );
};

const HabitCard = ({ habit, completed, onToggle, onDelete }: { habit: Habit, completed: boolean, onToggle: () => void, onDelete: () => void }) => (
  <motion.div layout initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} exit={{ opacity: 0, scale: 0.95 }} className="habit-card glass">
    <div className="habit-info">
      {habit.startTime && (
        <div className="habit-time">
          <Clock size={12} />
          {habit.startTime} - {habit.endTime}
        </div>
      )}
      <h4>{habit.title}</h4>
      <span className="freq-badge">{habit.frequency === 'daily' ? 'GÜNLÜK' : habit.frequency === 'weekly' ? 'HAFTALIK' : 'AYLIK'}</span>
      {habit.streak > 0 && (
        <div className="streak-tag">
          <Flame size={12} fill="#ff4500" />
          {habit.streak} gün seri
        </div>
      )}
    </div>
    <div className="habit-actions">
      <button className="delete-btn" onClick={onDelete}>
        <Trash2 size={18} />
      </button>
      <motion.button
        whileTap={{ scale: 0.9 }}
        className={`complete-btn ${completed ? 'completed' : ''}`}
        onClick={onToggle}
      >
        {completed ? <CheckCircle2 size={24} /> : <Play size={22} />}
      </motion.button>
    </div>
  </motion.div>
);

export default DashboardView;
</file>

<file path="src/views/HabitsView.tsx">
import { Trash2, Plus, Calendar } from 'lucide-react';
import { useHabits } from '../context/HabitContext';
import type { Habit } from '../context/HabitContext';

const HabitsView = () => {
  const { habits, deleteHabit } = useHabits();

  return (
    <div className="view-container">
      <header className="view-header">
        <h1>Alışkanlıklarım</h1>
        <p>Bütün planlarını buradan görebilir ve yönetebilirsin.</p>
      </header>

      <div className="habits-list-grid">
        {habits.length === 0 ? (
          <div className="empty-state glass">
            <Plus size={48} />
            <p>Henüz alışkanlık eklemedin.</p>
          </div>
        ) : (
          habits.map((habit: Habit) => (
            <div key={habit.id} className="habit-detail-card glass">
              <div className="habit-main">
                <div className="habit-header">
                  <h3>{habit.title}</h3>
                  <span className="category-tag">{habit.category || 'Genel'}</span>
                </div>
                <div className="habit-meta">
                  <div className="meta-item">
                    <Calendar size={14} />
                    <span>{habit.frequency === 'daily' ? 'Her Gün' : habit.frequency === 'weekly' ? 'Haftalık' : 'Aylık'}</span>
                  </div>
                  {habit.startTime && (
                    <div className="meta-item">
                      <span>{habit.startTime} - {habit.endTime}</span>
                    </div>
                  )}
                </div>
              </div>
              <div className="habit-actions">
                <button className="btn-danger" onClick={() => deleteHabit(habit.id)} title="Sil">
                  <Trash2 size={18} />
                </button>
              </div>
            </div>
          ))
        )}
      </div>

      <style>{`
        .view-container {
          max-width: 800px;
          margin: 0 auto;
        }
        .view-header {
          margin-bottom: 2rem;
        }
        .view-header p {
          color: var(--text-secondary);
          margin-top: 4px;
        }
        .habits-list-grid {
          display: flex;
          flex-direction: column;
          gap: 1rem;
        }
        .habit-detail-card {
          padding: 1.25rem;
          border-radius: 20px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          gap: 1rem;
        }
        .habit-header {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          margin-bottom: 0.5rem;
          flex-wrap: wrap;
        }
        .category-tag {
          font-size: 0.7rem;
          padding: 2px 8px;
          background: rgba(var(--accent-primary-rgb), 0.1);
          color: var(--accent-primary);
          border-radius: 6px;
          border: 1px solid rgba(var(--accent-primary-rgb), 0.2);
          text-transform: uppercase;
        }
        .habit-meta {
          display: flex;
          gap: 1rem;
          color: var(--text-secondary);
          font-size: 0.8rem;
          flex-wrap: wrap;
        }
        .meta-item {
          display: flex;
          align-items: center;
          gap: 0.4rem;
        }
        .btn-danger {
          background: rgba(239, 68, 68, 0.1);
          color: #ef4444;
          border: 1px solid rgba(239, 68, 68, 0.2);
          width: 44px;
          height: 44px;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 12px;
          cursor: pointer;
          transition: all 0.2s ease;
          flex-shrink: 0;
        }
        .btn-danger:hover {
          background: #ef4444;
          color: white;
        }
        .empty-state {
          padding: 4rem 2rem;
          text-align: center;
          border-radius: 24px;
          color: var(--text-secondary);
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 1rem;
        }

        @media (max-width: 768px) {
          .habit-detail-card {
            padding: 1rem;
          }
          .habit-header h3 {
            font-size: 1.1rem;
          }
          .habit-meta {
            gap: 0.5rem;
          }
        }
      `}</style>
    </div>
  );
};

export default HabitsView;
</file>

<file path="src/views/SettingsView.tsx">
import { useTheme } from '../context/ThemeContext';
import { Palette, Moon, Sun, Monitor } from 'lucide-react';

const colors = [
  { name: 'Purple', value: '#8b5cf6' },
  { name: 'Blue', value: '#3b82f6' },
  { name: 'Green', value: '#10b981' },
  { name: 'Orange', value: '#f59e0b' },
  { name: 'Red', value: '#ef4444' },
  { name: 'Pink', value: '#d946ef' },
] as const;

const SettingsView = () => {
  const { primaryColor, setPrimaryColor } = useTheme();

  return (
    <div className="view-container">
      <header className="view-header">
        <h1>Ayarlar</h1>
        <p>Görünümü ve tercihlerini özelleştir.</p>
      </header>

      <div className="settings-grid">
        <section className="settings-section glass">
          <div className="section-header">
            <Palette size={20} />
            <h3>Tema Rengi</h3>
          </div>
          <div className="color-options">
            {colors.map(color => (
              <button
                key={color.value}
                className={`color-btn ${primaryColor === color.value ? 'active' : ''}`}
                style={{ backgroundColor: color.value }}
                onClick={() => setPrimaryColor(color.value as any)}
                title={color.name}
              >
                {primaryColor === color.value && <div className="inner-dot" />}
              </button>
            ))}
          </div>
        </section>

        <section className="settings-section glass">
          <div className="section-header">
            <Monitor size={20} />
            <h3>Görünüm Modu</h3>
          </div>
          <div className="mode-options">
            <button className="mode-btn glass active"><Sun size={18} /> Açık</button>
            <button className="mode-btn glass"><Moon size={18} /> Koyu</button>
            <button className="mode-btn glass"><Monitor size={18} /> Otomatik</button>
          </div>
          <p className="hint">Şu anda sadece koyu mod desteklenmektedir.</p>
        </section>
      </div>

      <style>{`
        .view-container { max-width: 800px; margin: 0 auto; }
        .view-header { margin-bottom: 2rem; }
        .view-header p { color: var(--text-secondary); margin-top: 4px; }

        .settings-grid {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
        }

        .settings-section {
          padding: 1.5rem;
          border-radius: 24px;
        }

        .section-header {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          margin-bottom: 1.5rem;
          color: var(--text-primary);
        }

        .color-options {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
          gap: 1rem;
        }

        .color-btn {
          aspect-ratio: 1;
          width: 100%;
          border-radius: 14px;
          border: 2px solid transparent;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: transform 0.2s;
        }

        .color-btn:active {
          transform: scale(0.95);
        }

        .color-btn.active {
          border-color: white;
          transform: scale(1.05);
        }

        .inner-dot {
          width: 8px;
          height: 8px;
          background: white;
          border-radius: 50%;
        }

        .mode-options {
          display: flex;
          gap: 0.75rem;
        }

        .mode-btn {
          flex: 1;
          padding: 1rem 0.5rem;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.5rem;
          border-radius: 14px;
          cursor: not-allowed;
          opacity: 0.4;
          font-size: 0.75rem;
          font-weight: 500;
        }

        .mode-btn.active {
          border-color: var(--accent-primary);
          color: var(--accent-primary);
          opacity: 1;
        }

        .hint {
          margin-top: 1rem;
          font-size: 0.75rem;
          color: var(--text-secondary);
          text-align: center;
        }

        @media (max-width: 768px) {
          .settings-section { padding: 1.25rem; }
          .color-options { grid-template-columns: repeat(6, 1fr); gap: 0.5rem; }
        }
      `}</style>
    </div>
  );
};

export default SettingsView;
</file>

<file path="index.html">
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Habitify</title>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>
</file>

<file path="src/views/StatsView.tsx">
import { useHabits } from '../context/HabitContext';
import { PieChart, Pie, Cell, ResponsiveContainer, BarChart, Bar, XAxis, Tooltip } from 'recharts';

const StatsView = () => {
    const { habits } = useHabits();

    const calculateTotalHours = (start: string | undefined, end: string | undefined) => {
        if (!start || !end) return 0;
        const [h1, m1] = start.split(':').map(Number);
        const [h2, m2] = end.split(':').map(Number);
        let diff = (h2 * 60 + m2) - (h1 * 60 + m1);
        if (diff < 0) diff += 24 * 60;
        return diff / 60;
    };

    const timeDistribution = habits.reduce((acc: any[], habit) => {
        const hours = calculateTotalHours(habit.startTime, habit.endTime) || 1;
        const category = habit.category || 'Genel';
        const existing = acc.find(item => item.name === category);
        if (existing) {
            existing.value += hours;
        } else {
            acc.push({ name: category, value: hours });
        }
        return acc;
    }, []);

    const totalTime = timeDistribution.reduce((sum, item) => sum + item.value, 0);
    const timeDataWithPercent = timeDistribution.map(item => ({
        ...item,
        percent: totalTime > 0 ? Math.round((item.value / totalTime) * 100) : 0
    }));

    const COLORS = ['#8b5cf6', '#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#d946ef'];

    const days = ['Pzt', 'Sal', 'Çar', 'Per', 'Cum', 'Cmt', 'Paz'];
    const completionData = days.map(day => ({
        name: day,
        tamamlanan: habits.length > 0 ? Math.floor(Math.random() * (habits.length + 1)) : 0,
        hedef: habits.length
    }));

    return (
        <div className="view-container">
            <header className="view-header">
                <h1>Analiz</h1>
                <p>Gelişimini ve zaman dağılımını takip et.</p>
            </header>

            <div className="stats-grid">
                <div className="stat-card glass chart-card">
                    <h3>Zaman Dağılımı (%)</h3>
                    <div className="chart-wrapper">
                        <ResponsiveContainer width="100%" height="100%">
                            <PieChart>
                                <Pie
                                    data={timeDataWithPercent}
                                    cx="50%"
                                    cy="50%"
                                    innerRadius="60%"
                                    outerRadius="80%"
                                    paddingAngle={5}
                                    dataKey="value"
                                    label={({ name, percent }) => (percent !== undefined && percent > 5) ? `${name}` : ''}
                                >
                                    {timeDataWithPercent.map((_entry, index) => (
                                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                                    ))}
                                </Pie>
                                <Tooltip
                                    contentStyle={{ background: 'rgba(20,20,20,0.9)', border: '1px solid var(--border-color)', borderRadius: '12px', fontSize: '12px' }}
                                />
                            </PieChart>
                        </ResponsiveContainer>
                    </div>
                </div>

                <div className="stat-card glass chart-card">
                    <h3>Haftalık Performans</h3>
                    <div className="chart-wrapper">
                        <ResponsiveContainer width="100%" height="100%">
                            <BarChart data={completionData}>
                                <XAxis dataKey="name" stroke="var(--text-secondary)" fontSize={12} tickLine={false} axisLine={false} />
                                <Tooltip
                                    cursor={{ fill: 'rgba(255,255,255,0.05)' }}
                                    contentStyle={{ background: 'rgba(20,20,20,0.9)', border: '1px solid var(--border-color)', borderRadius: '12px', fontSize: '12px' }}
                                />
                                <Bar name="Tamam" dataKey="tamamlanan" fill="var(--accent-primary)" radius={[4, 4, 0, 0]} />
                                <Bar name="Hedef" dataKey="hedef" fill="rgba(255,255,255,0.05)" radius={[4, 4, 0, 0]} />
                            </BarChart>
                        </ResponsiveContainer>
                    </div>
                </div>

                <div className="stat-card glass summary-stats">
                    <div className="summary-item">
                        <span className="summary-label">Planlar</span>
                        <span className="summary-value">{habits.length}</span>
                    </div>
                    <div className="summary-item">
                        <span className="summary-label">En İyi Seri</span>
                        <span className="summary-value">{Math.max(0, ...habits.map(h => h.streak))}</span>
                    </div>
                    <div className="summary-item">
                        <span className="summary-label">Verimlilik</span>
                        <span className="summary-value">
                            {habits.length > 0 ?
                                Math.round((habits.reduce((acc, h) => acc + h.completedDates.length, 0) / (habits.length * 7)) * 100)
                                : 0}%
                        </span>
                    </div>
                </div>
            </div>

            <style>{`
        .view-container { max-width: 1000px; margin: 0 auto; }
        .view-header { margin-bottom: 2rem; }
        .view-header p { color: var(--text-secondary); margin-top: 4px; }
        
        .stats-grid { 
          display: grid; 
          grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); 
          gap: 1.5rem; 
        }

        .stat-card { 
          padding: 1.5rem; 
          border-radius: 24px; 
          display: flex;
          flex-direction: column;
        }

        .stat-card h3 { 
          margin-bottom: 1.5rem; 
          font-size: 1rem; 
          font-weight: 600;
          color: var(--text-primary);
        }

        .chart-wrapper {
          width: 100%;
          height: 250px;
        }

        .summary-stats { 
          grid-column: 1 / -1; 
          display: flex; 
          justify-content: space-around; 
          text-align: center;
          padding: 2rem 1.5rem;
        }

        .summary-item { display: flex; flex-direction: column; gap: 0.5rem; }
        .summary-label { color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; }
        .summary-value { font-size: 1.75rem; font-weight: 700; color: var(--accent-primary); }

        @media (max-width: 768px) { 
          .stats-grid { grid-template-columns: 1fr; gap: 1rem; } 
          .summary-stats { flex-direction: row; flex-wrap: wrap; gap: 1.5rem; }
          .summary-item { flex: 1; min-width: 100px; }
          .summary-value { font-size: 1.5rem; }
        }
      `}</style>
        </div>
    );
};

export default StatsView;
</file>

<file path="src/components/Layout.tsx">
import { useState } from 'react';
import { Home, List, PieChart, Settings, Plus, LogOut, User as UserIcon } from 'lucide-react';
import HabitForm from './HabitForm';
import { useAuth } from '../context/AuthContext';

export type TabType = 'dashboard' | 'habits' | 'stats' | 'settings';

interface LayoutProps {
  children: React.ReactNode;
  activeTab: TabType;
  setActiveTab: (tab: TabType) => void;
}

const Layout = ({ children, activeTab, setActiveTab }: LayoutProps) => {
  const [isFormOpen, setIsFormOpen] = useState(false);
  const { user, logout } = useAuth();

  return (
    <div className="layout">
      {/* Mobile Top Header */}
      <header className="mobile-header glass">
        <h2 className="title-gradient">Habitify</h2>
        <div className="mobile-header-actions">
          <button className="mobile-add-btn" onClick={() => setIsFormOpen(true)}>
            <Plus size={24} />
          </button>
          <button className="logout-btn-minimal" onClick={logout}>
            <LogOut size={20} />
          </button>
        </div>
      </header>

      {/* Desktop Sidebar */}
      <nav className="sidebar glass">
        <div className="logo">
          <h2 className="title-gradient">Habitify</h2>
        </div>
        <div className="nav-items">
          <NavItem
            icon={<Home size={20} />}
            label="Dashboard"
            active={activeTab === 'dashboard'}
            onClick={() => setActiveTab('dashboard')}
          />
          <NavItem
            icon={<List size={20} />}
            label="Alışkanlıklar"
            active={activeTab === 'habits'}
            onClick={() => setActiveTab('habits')}
          />
          <NavItem
            icon={<PieChart size={20} />}
            label="İstatistikler"
            active={activeTab === 'stats'}
            onClick={() => setActiveTab('stats')}
          />
          <NavItem
            icon={<Settings size={20} />}
            label="Ayarlar"
            active={activeTab === 'settings'}
            onClick={() => setActiveTab('settings')}
          />
        </div>
        <button className="btn btn-primary add-habit-btn" onClick={() => setIsFormOpen(true)}>
          <Plus size={20} />
          <span>Yeni Alışkanlık</span>
        </button>

        <div className="sidebar-footer">
          <div className="user-profile">
            <div className="user-avatar">
              <UserIcon size={18} />
            </div>
            <div className="user-info">
              <span className="user-name">{user?.name || 'Kullanıcı'}</span>
              <span className="user-email">{user?.email}</span>
            </div>
          </div>
          <button className="logout-btn" onClick={logout}>
            <LogOut size={18} />
            <span>Çıkış Yap</span>
          </button>
        </div>
      </nav>

      {/* Mobile Bottom Navigation */}
      <nav className="bottom-nav glass">
        <div className={`bottom-nav-item ${activeTab === 'dashboard' ? 'active' : ''}`} onClick={() => setActiveTab('dashboard')}>
          <Home size={24} />
          <span>Giriş</span>
        </div>
        <div className={`bottom-nav-item ${activeTab === 'habits' ? 'active' : ''}`} onClick={() => setActiveTab('habits')}>
          <List size={24} />
          <span>Liste</span>
        </div>
        <div className={`bottom-nav-item ${activeTab === 'stats' ? 'active' : ''}`} onClick={() => setActiveTab('stats')}>
          <PieChart size={24} />
          <span>Analiz</span>
        </div>
        <div className={`bottom-nav-item ${activeTab === 'settings' ? 'active' : ''}`} onClick={() => setActiveTab('settings')}>
          <Settings size={24} />
          <span>Ayarlar</span>
        </div>
      </nav>

      <main className="content">
        {children}
      </main>

      {isFormOpen && <HabitForm onClose={() => setIsFormOpen(false)} />}

      <style>{`
        .layout {
          display: flex;
          min-height: 100vh;
          background-color: var(--bg-color);
        }
        
        .mobile-header {
          display: none;
          position: fixed;
          top: 0; left: 0; right: 0;
          height: 60px;
          padding: 0 1.5rem;
          align-items: center;
          justify-content: space-between;
          z-index: 100;
          border-bottom: 1px solid var(--border-color);
        }

        .mobile-add-btn {
          background: var(--accent-primary);
          border: none;
          color: white;
          width: 40px;
          height: 40px;
          border-radius: 12px;
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 12px rgba(var(--accent-primary-rgb), 0.3);
        }

        .mobile-header-actions {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .logout-btn-minimal {
          background: none;
          border: none;
          color: var(--text-secondary);
          padding: 8px;
        }

        .sidebar {
          width: 280px;
          height: 100vh;
          position: fixed;
          left: 0;
          top: 0;
          padding: 2rem;
          display: flex;
          flex-direction: column;
          gap: 2rem;
          z-index: 100;
        }

        .bottom-nav {
          display: none;
          position: fixed;
          bottom: 0; left: 0; right: 0;
          height: 70px;
          padding: 0 1rem;
          align-items: center;
          justify-content: space-around;
          z-index: 100;
          border-top: 1px solid var(--border-color);
          padding-bottom: env(safe-area-inset-bottom);
        }

        .bottom-nav-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 4px;
          color: var(--text-secondary);
          cursor: pointer;
          transition: all 0.2s;
          flex: 1;
        }

        .bottom-nav-item span {
          font-size: 0.7rem;
          font-weight: 500;
        }

        .bottom-nav-item.active {
          color: var(--accent-primary);
        }

        .content {
          margin-left: 280px;
          flex: 1;
          padding: 2.5rem;
          min-height: 100vh;
          width: 100%;
        }

        .nav-items {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .nav-item {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 0.75rem 1rem;
          border-radius: 12px;
          color: var(--text-secondary);
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .nav-item:hover {
          background: rgba(255, 255, 255, 0.05);
          color: var(--text-primary);
        }

        .nav-item.active {
          background: rgba(var(--accent-primary-rgb), 0.1);
          color: var(--accent-primary);
        }

        .add-habit-btn {
          width: 100%;
        }

        .sidebar-footer {
          margin-top: auto;
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
          padding-top: 2rem;
          border-top: 1px solid var(--border-color);
        }

        .user-profile {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .user-avatar {
          width: 36px;
          height: 36px;
          border-radius: 10px;
          background: rgba(var(--accent-primary-rgb), 0.1);
          color: var(--accent-primary);
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .user-info {
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        .user-name {
          font-size: 0.9rem;
          font-weight: 600;
          white-space: nowrap;
          text-overflow: ellipsis;
        }

        .user-email {
          font-size: 0.7rem;
          color: var(--text-secondary);
          white-space: nowrap;
          text-overflow: ellipsis;
        }

        .logout-btn {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 0.75rem 1rem;
          background: rgba(255, 255, 255, 0.03);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          color: var(--text-secondary);
          cursor: pointer;
          transition: all 0.2s;
        }

        .logout-btn:hover {
          background: rgba(239, 68, 68, 0.1);
          color: #ef4444;
          border-color: rgba(239, 68, 68, 0.2);
        }

        @media (max-width: 1024px) {
          .sidebar { width: 240px; }
          .content { margin-left: 240px; }
        }

        @media (max-width: 768px) {
          .sidebar { display: none; }
          .mobile-header { display: flex; }
          .bottom-nav { display: flex; }
          .content {
            margin-left: 0;
            padding: 1rem;
            padding-top: 80px;
            padding-bottom: 90px;
          }
        }
      `}</style>
    </div>
  );
};

interface NavItemProps {
  icon: React.ReactNode;
  label: string;
  active?: boolean;
  onClick: () => void;
}

const NavItem = ({ icon, label, active, onClick }: NavItemProps) => (
  <div className={`nav-item ${active ? 'active' : ''}`} onClick={onClick}>
    {icon}
    <span className="label">{label}</span>
  </div>
);

export default Layout;
</file>

</files>
